# musicrypt

A collection of lightweight utility scripts for managing a local music library on Linux and macOS. These tools are designed to work well with [gamdl](https://github.com/glomatico/gamdl) downloads.

## Scripts

### 1. `alacflac`
Recursively searches a directory for audio files encoded in ALAC (Apple Lossless Audio Codec) and converts them to FLAC (Free Lossless Audio Codec) using `ffmpeg`. It replaces the original file upon successful conversion.

Useful for converting high-quality ALAC files downloaded via [gamdl](https://github.com/glomatico/gamdl) to FLAC.

**Usage:**
```bash
alacflac [options]
```

**Options:**
- `-v, --verbose`: Enable verbose output (shows files being converted).
- `--dir DIR`: Directory to search (default: `~/Music`).

**Dependencies:**
- Python 3
- `ffmpeg`
- `ffprobe` (usually part of the ffmpeg package)

### 2. `m3u82m3u`
Recursively finds `.m3u8` and `.m3u` playlists and processes them. It:
1. Converts `.m3u8` files to `.m3u` format.
2. Cleans up file paths by removing relative prefix strings (like `../`).
3. Replaces the original `.m3u8` file.
4. Updates existing `.m3u` files in-place if changes are needed.

Designed to fix relative paths in playlists generated by [gamdl](https://github.com/glomatico/gamdl).

**Usage:**
```bash
m3u82m3u [options]
```

**Options:**
- `-v, --verbose`: Enable verbose output.
- `--m4a2flac`: Replace `.m4a` with `.flac` in playlist entries (useful if you've run `alacflac`).
- `--dir DIR`: Directory to search (default: `~/Music`).

**Dependencies:**
- Python 3

## Installation

### 1. Clone the repository
Clone this repository to a location of your choice (e.g., `~/.local/scripts`):

```bash
git clone https://github.com/BagpipesRbetter/musicrypt.git ~/.local/scripts
cd ~/.local/scripts
```

### 2. Install Dependencies
Ensure you have Python 3 and FFmpeg installed.

**macOS (via Homebrew):**
```bash
brew install python ffmpeg
```

**Debian/Ubuntu:**
```bash
sudo apt update
sudo apt install python3 ffmpeg
```

**Arch Linux:**
```bash
sudo pacman -S python ffmpeg
```

**Fedora:**
```bash
sudo dnf install python3 ffmpeg
```

### 3. Add to PATH
To run these scripts from anywhere, add the script directory to your PATH or create symbolic links to a directory already in your PATH (like `~/.local/bin`).

**Option A: Create Symbolic Links (Recommended)**
```bash
mkdir -p ~/.local/bin
ln -s ~/.local/scripts/alacflac ~/.local/bin/alacflac
ln -s ~/.local/scripts/m3u82m3u ~/.local/bin/m3u82m3u
```
*Ensure `~/.local/bin` is in your `$PATH`.*

**Option B: Add directory to PATH**
Add the following to your shell configuration file (e.g., `~/.bashrc` or `~/.zshrc`):
```bash
export PATH="$HOME/.local/scripts:$PATH"
```

**Option C: Copy scripts to a directory in PATH**
Alternatively, you can copy the scripts directly to a directory that is already in your PATH:
```bash
cp alacflac m3u82m3u ~/.local/bin/
```

## License
[MIT](LICENSE)
